class t{reflow(t){t.getBoundingClientRect()}}const e={BOTTOM:new class extends t{performLayout(t){var e,s;const o=t.getBoundingClientRect(),n=t.target.getBoundingClientRect(),h=t.parent.getBoundingClientRect(),r=t.behavior.alignment;null!==(e=null==r?void 0:r.x)&&void 0!==e||i.ALL,null!==(s=null==r?void 0:r.y)&&void 0!==s||i.ALL;const a=n.x+(n.width-o.width)/2,l=n.y+n.height,d=window.innerWidth-(a+o.width),c=Math.max(-1*a+h.left,0),y=Math.max(l+o.height-h.bottom,0);console.log(d);const u=a+c,p=l-y;return{x:Math.max(u,0),y:Math.max(p,0),size:{width:Math.min(o.width,h.width),height:Math.min(o.height,o.bottom+p)}}}}};var i;!function(t){t.NONE="none",t.ALL="all",t.SIZE="size",t.POSITION="position"}(i||(i={}));class s{static attach(t,i,s=document.body,o={render:e.BOTTOM}){if(null==t)throw new Error("todo");if(null==i)throw new Error("todo");if(null==s)throw new Error("todo");const n=document.createElement("overlay-wrapper");return n.append(t),n.target=i,n.parent=s,n.behavior=o,this.overlays.set(t,n),s.append(n),n}static detach(t){console.log(this.overlays.get(t))}}s.overlays=new Map;class o extends HTMLElement{unsetLayout(){this.style.width="max-content",this.style.height="max-content",this.style.left="0px",this.style.top="0px",this.getBoundingClientRect()}disconnectedCallback(){this.observer.disconnect()}connectedCallback(){this.style.display="block",this.style.position="fixed",this.style.left="0px",this.style.top="0px",this.style.width="max-content",this.style.height="max-content",this.performLayout(),this.observer=new MutationObserver((()=>{this.unsetLayout(),this.performLayout()})),this.observer.observe(this.firstElementChild,{attributes:!0,characterData:!0,subtree:!0,childList:!0}),window.addEventListener("resize",(()=>{this.unsetLayout(),this.performLayout()}))}performLayout(){const t=this.behavior.render.performLayout(this);this.style.width=`${t.size.width}px`,this.style.height=`${t.size.height}px`,this.style.left=`${t.x}px`,this.style.top=`${t.y}px`}}customElements.define("overlay-wrapper",o);export{s as Overlay,e as OverlayAlignment,o as OverlayElement,t as OverlayRender};
//# sourceMappingURL=index.esm.js.map
